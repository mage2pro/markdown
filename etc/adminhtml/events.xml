<?xml version='1.0'?>
<config xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:noNamespaceSchemaLocation='../../../../../../lib/internal/Magento/Framework/Event/etc/events.xsd'>
	<!--
		2015-10-23
		Обработка этих событий позволяет нам подставить свой класс
		для обработки товарных свойств типа «textarea»
		вместо стандартного класса \Magento\Catalog\Block\Adminhtml\Helper\Form\Wysiwyg
		https://github.com/magento/magento2/blob/0be91a56d050791ac0b67a47185d79df31e79329/app/code/Magento/Catalog/Block/Adminhtml/Product/Edit/Tab/Attributes.php#L151

		Обратите внимание, что аналогичное событие для товарных разделов пока отсутствует:
        https://github.com/magento/magento2/issues/2165
        Inconsistency:
        \Magento\Catalog\Block\Adminhtml\Product\Edit\Tab\Attributes::_getAdditionalElementTypes()
        fires the event «adminhtml_catalog_product_edit_element_types»
        but \Magento\Catalog\Block\Adminhtml\Category\Tab\Attributes::_getAdditionalElementTypes()
        does not fire a similar event.

        Я пока добавил это событие своим классом, перекрывающим стандартный:
		@see \Df\Catalog\Block\Adminhtml\Category\Tab\Attributes::_getAdditionalElementTypes()
	-->
	<event name='adminhtml_catalog_category_edit_element_types'>
		<observer
			name='Dfe\Markdown\Observer\ElementTypes'
			instance='Dfe\Markdown\Observer\ElementTypes'
		/>
	</event>
	<event name='adminhtml_catalog_product_edit_element_types'>
		<observer
			name='Dfe\Markdown\Observer\ElementTypes'
			instance='Dfe\Markdown\Observer\ElementTypes'
		/>
	</event>
	<!--
		2015-11-02
		Цель обработки этого события —
		подставовка в поле «content» Markdown вместо HTML.
		@see \Magento\Cms\Block/Adminhtml\Page\Edit\Tab\Content::_prepareForm()
		https://github.com/magento/magento2/blob/c743dec47b2e5de036eb5638fec44a54bfb31040/app/code/Magento/Cms/Block/Adminhtml/Page/Edit/Tab/Content.php#L99
			$this->_eventManager->dispatch(
				'adminhtml_cms_page_edit_tab_content_prepare_form', ['form' => $form]
			);
	-->
	<event name='adminhtml_cms_page_edit_tab_content_prepare_form'>
		<observer
			name='Dfe\Markdown\Observer\AdminhtmlCmsPageEditTabContentPrepareForm'
			instance='Dfe\Markdown\Observer\AdminhtmlCmsPageEditTabContentPrepareForm'
		/>
	</event>
	<!--
		2015-11-02
		Цель обработки этого события — перетасовка содержимое полей:
		в поле «content» подставляем HTML вместо Markdown (содержимое поля «content_html_compiled»),
		а в поле «markdown» — прежнее содержимое поля «content» (т.е. Markdown).
        $this->_eventManager->dispatch(
        	'cms_page_prepare_save',
        	['page' => $model, 'request' => $this->getRequest()]
        );
        https://github.com/magento/magento2/blob/f578e54e093c31378ca981cfe336f7e651194585/app/code/Magento/Cms/Controller/Adminhtml/Page/Save.php#L57-L60
	-->
	<event name='cms_page_prepare_save'>
		<observer
			name='Dfe\Markdown\Observer\CmsPagePrepareSave'
			instance='Dfe\Markdown\Observer\CmsPagePrepareSave'
		/>
	</event>
</config>
