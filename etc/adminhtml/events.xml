<?xml version='1.0'?>
<config xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:noNamespaceSchemaLocation='../../../../../../lib/internal/Magento/Framework/Event/etc/events.xsd'>
	<!--
		2015-10-23
		Обработка этих событий позволяет нам подставить свой класс
		для обработки товарных свойств типа «textarea»
		вместо стандартного класса \Magento\Catalog\Block\Adminhtml\Helper\Form\Wysiwyg
		https://github.com/magento/magento2/blob/0be91a56d050791ac0b67a47185d79df31e79329/app/code/Magento/Catalog/Block/Adminhtml/Product/Edit/Tab/Attributes.php#L151

		Обратите внимание, что аналогичное событие для товарных разделов пока отсутствует:
        https://github.com/magento/magento2/issues/2165
        Inconsistency:
        \Magento\Catalog\Block\Adminhtml\Product\Edit\Tab\Attributes::_getAdditionalElementTypes()
        fires the event «adminhtml_catalog_product_edit_element_types»
        but \Magento\Catalog\Block\Adminhtml\Category\Tab\Attributes::_getAdditionalElementTypes()
        does not fire a similar event.

        Я пока добавил это событие своим классом, перекрывающим стандартный:
		@see \Df\Catalog\Block\Adminhtml\Category\Tab\Attributes::_getAdditionalElementTypes()
	-->
	<event name='adminhtml_catalog_category_edit_element_types'>
		<observer
			name='Dfe\Markdown\Observer\ElementTypes'
			instance='Dfe\Markdown\Observer\ElementTypes'
		/>
	</event>
	<event name='adminhtml_catalog_product_edit_element_types'>
		<observer
			name='Dfe\Markdown\Observer\ElementTypes'
			instance='Dfe\Markdown\Observer\ElementTypes'
		/>
	</event>
	<!--
		2015-11-03
		Цель обработки события — подстановка Markdown вместо HTML в поля редакторов
		на административной странице товарного раздела.
	-->
	<event name='adminhtml_catalog_category_edit_prepare_form'>
		<observer
			name='Dfe\Markdown\Observer\CatalogPrepareForm'
			instance='Dfe\Markdown\Observer\CatalogPrepareForm'
		/>
	</event>
	<!--
		2015-11-03
		Цель обработки события — подстановка Markdown вместо HTML в поля редакторов
		на административной странице товара.
	-->
	<event name='adminhtml_catalog_product_edit_prepare_form'>
		<observer
			name='Dfe\Markdown\Observer\CatalogPrepareForm'
			instance='Dfe\Markdown\Observer\CatalogPrepareForm'
		/>
	</event>
	<!--
		2015-11-03
		Цель обработки этих событий — перетасовка содержимое полей:
		в поле «content» подставляем HTML вместо Markdown (содержимое поля «content_html_compiled»),
		а в поле «markdown» — прежнее содержимое поля «content» (т.е. Markdown).
		$this->_eventManager->dispatch(
			'controller_action_predispatch_' . $request->getFullActionName(),
			$eventParameters
		);
        https://github.com/magento/magento2/blob/f578e54e093c31378ca981cfe336f7e651194585/lib/internal/Magento/Framework/App/Action/Action.php#L93-L96
	-->
	<event name='controller_action_predispatch_cms_block_save'>
		<observer
			name='Dfe\Markdown\Observer\ControllerActionPredispatch'
			instance='Dfe\Markdown\Observer\ControllerActionPredispatch'
		/>
	</event>
	<event name='controller_action_predispatch_cms_page_save'>
		<observer
			name='Dfe\Markdown\Observer\ControllerActionPredispatch'
			instance='Dfe\Markdown\Observer\ControllerActionPredispatch'
		/>
	</event>
</config>
